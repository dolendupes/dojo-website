---
// This component can be configured to send to your preferred endpoint
// Currently set up to work with common form handlers
---

<form id="lead-capture-form" class="max-w-xl mx-auto">
  <div class="grid grid-cols-1 gap-6 sm:grid-cols-2">
    <div>
      <label for="first-name" class="block text-sm font-medium text-dojo-black">
        First Name
      </label>
      <input
        type="text"
        name="first-name"
        id="first-name"
        required
        class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-dojo-red focus:ring-dojo-red"
      />
    </div>
    
    <div>
      <label for="last-name" class="block text-sm font-medium text-dojo-black">
        Last Name
      </label>
      <input
        type="text"
        name="last-name"
        id="last-name"
        required
        class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-dojo-red focus:ring-dojo-red"
      />
    </div>
    
    <div class="sm:col-span-2">
      <label for="email" class="block text-sm font-medium text-dojo-black">
        Email
      </label>
      <input
        type="email"
        name="email"
        id="email"
        required
        class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-dojo-red focus:ring-dojo-red"
      />
    </div>
    
    <div class="sm:col-span-2">
      <label for="phone" class="block text-sm font-medium text-dojo-black">
        Phone
      </label>
      <input
        type="tel"
        name="phone"
        id="phone"
        class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-dojo-red focus:ring-dojo-red"
      />
    </div>
    
    <div class="sm:col-span-2">
      <label for="membership-interest" class="block text-sm font-medium text-dojo-black">
        Membership Interest
      </label>
      <select
        id="membership-interest"
        name="membership-interest"
        class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-dojo-red focus:ring-dojo-red"
      >
        <option value="">Select membership type</option>
        <option value="standard">Standard Founding ($400/month)</option>
        <option value="under35">Under 35 Founding ($300/month)</option>
        <option value="military">Military & First Responder ($300/month)</option>
        <option value="undecided">Not sure yet</option>
      </select>
    </div>
    
    <div class="sm:col-span-2">
      <label for="message" class="block text-sm font-medium text-dojo-black">
        Tell us about yourself (optional)
      </label>
      <textarea
        id="message"
        name="message"
        rows="3"
        class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-dojo-red focus:ring-dojo-red"
      ></textarea>
    </div>
  </div>
  
  <div class="mt-6">
    <button
      type="submit"
      class="w-full bg-dojo-red text-white py-3 px-6 rounded font-semibold hover:bg-red-700 transition-colors"
    >
      Get Started
    </button>
  </div>
  
  <div id="form-message" class="mt-4 hidden">
    <div class="rounded-md p-4">
      <p class="text-sm"></p>
    </div>
  </div>
</form>

<script>
  const form = document.getElementById('lead-capture-form') as HTMLFormElement;
  const formMessage = document.getElementById('form-message');
  const messageText = formMessage?.querySelector('p');
  
  form?.addEventListener('submit', async (e) => {
    e.preventDefault();
    
    const formData = new FormData(form);
    const data = Object.fromEntries(formData);
    
    // Configure this endpoint based on your backend
    // Options:
    // 1. MarianaTek webhook endpoint
    // 2. Custom API endpoint that integrates with MarianaTek
    // 3. Zapier/Make webhook for multi-system integration
    // 4. Direct to a Google Sheet via Apps Script
    
    try {
      // Example: Send to a webhook endpoint
      // const response = await fetch('YOUR_WEBHOOK_URL', {
      //   method: 'POST',
      //   headers: {
      //     'Content-Type': 'application/json',
      //   },
      //   body: JSON.stringify(data),
      // });
      
      // For now, just log the data and show success
      console.log('Form submission:', data);
      
      // Show success message
      if (formMessage && messageText) {
        formMessage.classList.remove('hidden');
        formMessage.querySelector('div')?.classList.add('bg-green-50', 'border', 'border-green-200');
        messageText.classList.add('text-green-800');
        messageText.textContent = 'Thank you for your interest! We\'ll be in touch soon to schedule your fitness consultation with Brent.';
      }
      
      // Reset form
      form.reset();
      
      // Scroll to message
      formMessage?.scrollIntoView({ behavior: 'smooth', block: 'center' });
      
    } catch (error) {
      // Show error message
      if (formMessage && messageText) {
        formMessage.classList.remove('hidden');
        formMessage.querySelector('div')?.classList.add('bg-red-50', 'border', 'border-red-200');
        messageText.classList.add('text-red-800');
        messageText.textContent = 'There was an error submitting your information. Please try again or contact us directly.';
      }
      
      console.error('Form submission error:', error);
    }
  });
</script>
